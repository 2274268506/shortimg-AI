# Grafana 仪表板对比

## 📊 两个仪表板的定位

### 🔧 短链服务监控总览 (short-link-overview)
**定位**: 技术运维监控
**用户**: 开发/运维团队
**URL**: http://localhost:3000/d/short-link-overview

#### 核心关注点
- ✅ 系统健康状态
- ✅ 服务性能指标
- ✅ 基础设施监控
- ✅ 技术故障排查

#### 包含面板 (7个)
1. **请求总览** - 整体 QPS
2. **错误率** - 5xx 错误百分比
3. **响应时间** - P50/P95/P99 延迟
4. **缓存命中率** - L1/L2 缓存性能
5. **活跃连接数** - 并发连接监控
6. **短链总数** - 数据总量
7. **速率限制** - 限流触发频率

---

### 📈 短链管理面板 (short-link-management)
**定位**: 业务运营管理
**用户**: 产品/运营/管理团队
**URL**: http://localhost:3000/d/short-link-management

#### 核心关注点
- ✅ 业务数据统计
- ✅ 运营指标分析
- ✅ 用户行为洞察
- ✅ 数据驱动决策

#### 包含面板 (15个)
1. **短链创建趋势** - 创建成功/失败率
2. **短链查询趋势** - 查询成功/失败率
3. **短链总数统计** - 带阈值的总数监控
4. **今日创建数** - 24小时创建统计
5. **今日访问数** - 24小时重定向统计
6. **创建成功率** - 仪表盘展示成功率
7. **API 响应时间分布** - 创建/查询性能对比
8. **数据库查询性能** - SELECT/INSERT/UPDATE 性能
9. **热门短链 Top 10** - 访问量排行榜
10. **短链创建来源分布** - 按请求方法统计
11. **缓存效率** - 多维度缓存分析
12. **错误类型分布** - 按错误类型统计
13. **批量操作统计** - 批量创建监控
14. **删除操作统计** - 删除操作监控
15. **更新操作统计** - 更新操作监控

---

## 🎯 使用场景对比

| 场景 | 监控总览 | 管理面板 |
|-----|---------|---------|
| **日常值班** | ✅ 主要使用 | ⭕ 辅助参考 |
| **性能优化** | ✅ 主要使用 | ⭕ 辅助参考 |
| **故障排查** | ✅ 主要使用 | ⭕ 辅助参考 |
| **业务分析** | ⭕ 辅助参考 | ✅ 主要使用 |
| **运营决策** | ⭕ 辅助参考 | ✅ 主要使用 |
| **用户行为分析** | ❌ 不适用 | ✅ 主要使用 |
| **系统扩容评估** | ✅ 主要使用 | ✅ 主要使用 |

---

## 👥 推荐使用人群

### 技术团队（开发/运维）
**主要仪表板**: 短链服务监控总览
**查看频率**: 每天多次

**关键关注点**:
- 系统是否健康？
- 性能是否达标？
- 有无异常告警？
- 资源使用情况如何？

**辅助仪表板**: 短链管理面板（排查业务问题时）

---

### 产品/运营团队
**主要仪表板**: 短链管理面板
**查看频率**: 每天1-2次

**关键关注点**:
- 今日创建了多少短链？
- 哪些短链最热门？
- 用户如何使用API？
- 业务增长趋势如何？

**辅助仪表板**: 短链服务监控总览（了解系统状态时）

---

### 管理层
**主要仪表板**: 两者结合
**查看频率**: 每周1次

**关键关注点**:
- 服务稳定性（监控总览）
- 业务增长（管理面板）
- 成本效益（两者结合）
- 未来规划（两者结合）

---

## 🔄 数据流对比

### 监控总览 - 技术指标
```
OpenResty → Prometheus 指标 → 监控总览
    ↓
- HTTP 请求总数
- 响应时间分布
- 错误率统计
- 缓存命中率
- 活跃连接数
```

### 管理面板 - 业务指标
```
业务操作 → Prometheus 指标 → 管理面板
    ↓
- 短链创建/查询/删除
- 批量操作统计
- 热门数据分析
- 错误类型分布
- 用户行为模式
```

---

## 📋 快速访问指南

### 方式 1: 直接访问 URL
```
监控总览: http://localhost:3000/d/short-link-overview
管理面板: http://localhost:3000/d/short-link-management
```

### 方式 2: 通过 Grafana 菜单
1. 访问 http://localhost:3000
2. 登录 (admin/admin)
3. 点击左侧菜单 → Dashboards
4. 选择对应仪表板

### 方式 3: 使用验证脚本
```powershell
.\scripts\check-grafana.ps1
```
脚本会显示所有可用仪表板的链接。

---

## 🎨 自定义建议

### 如果你是开发者
1. 将 **监控总览** 设为浏览器首页
2. 配置关键指标告警
3. 定期查看性能趋势
4. 关注错误率和响应时间

### 如果你是运营
1. 收藏 **管理面板** 链接
2. 每日查看业务数据
3. 分析热门短链
4. 监控用户行为

### 如果你是管理者
1. 创建自定义仪表板
2. 组合两个面板的关键指标
3. 设置周报/月报定时导出
4. 关注长期趋势

---

## 📊 指标映射表

| 业务需求 | 使用仪表板 | 关键面板 |
|---------|-----------|---------|
| 服务是否正常？ | 监控总览 | 错误率、响应时间 |
| 性能是否达标？ | 监控总览 | 响应时间、活跃连接 |
| 今天创建了多少？ | 管理面板 | 今日创建数 |
| 哪些短链最火？ | 管理面板 | 热门短链 Top 10 |
| 缓存效果如何？ | 两者都有 | 缓存命中率/缓存效率 |
| 有哪些错误？ | 管理面板 | 错误类型分布 |
| 数据库性能？ | 管理面板 | 数据库查询性能 |
| 用户如何使用？ | 管理面板 | 创建来源分布 |

---

## 🚀 高级技巧

### 技巧 1: 设置多显示器
- 左屏：监控总览（实时监控）
- 右屏：管理面板（业务分析）

### 技巧 2: 创建自定义视图
1. 复制现有仪表板
2. 删除不需要的面板
3. 调整布局
4. 保存为个人仪表板

### 技巧 3: 导出报表
1. 点击仪表板标题旁的 "Share"
2. 选择 "Export"
3. 选择时间范围
4. 导出为 PDF 或 PNG

### 技巧 4: 设置告警
- 在监控总览设置技术告警（如高错误率）
- 在管理面板设置业务告警（如创建量异常）

---

## 📚 相关文档

- [监控系统总体文档](./MONITORING.md)
- [Grafana 设置指南](./GRAFANA_SETUP.md)
- [管理面板详细说明](./MANAGEMENT_DASHBOARD.md)
- [阶段2完成报告](./STAGE2_COMPLETION_REPORT.md)

---

**建议**: 根据你的角色选择主要使用的仪表板，但了解两者的区别能帮助你更全面地理解系统状态。

**更新日期**: 2025-12-05
