# 图床系统访问说明

## 🚀 启动步骤

### 1. 启动后端
```powershell
cd backend
go run main.go
```
后端将在 **http://localhost:8080** 运行

### 2. 启动前端
```powershell
cd frontend
npm run dev
```
前端将在 **http://localhost:5173** 或 **http://localhost:5174** 运行

### 3. 访问系统
在浏览器中打开前端提示的地址，例如：
- http://localhost:5173
- 或 http://localhost:5174（如果 5173 端口被占用）

## ⚠️ 最新修复

### 刷新页面查看修复效果
已修复图片列表不显示的问题。请：
1. **按 Ctrl + Shift + R 强制刷新页面**
2. 打开浏览器开发者工具（F12）查看 Console 日志
3. 应该能看到详细的加载日志和图片数据

### 调试信息
打开 Console 后，您应该看到类似的日志：
```
ImageManager mounted
开始加载相册...
相册API响应: {data: Array(4)}
解析后的相册列表: [...]
设置当前相册: {...}
相册加载完成，当前相册: {...}
开始加载相册图片，ID: 2
开始加载图片，相册ID: 2 关键词:  页码: 1
图片API响应: {data: Array(1), page: 1, pageSize: 24, total: 1}
解析后的图片列表: [...]
图片总数: 1
图片加载完成，数量: 1
```

## 🔧 当前状态

### 已修复的问题
✅ 后端排序逻辑已从数据库层面实现
✅ 分页功能完善，支持加载更多
✅ 修复了响应数据解析的双重嵌套问题
✅ 图片懒加载已启用
✅ 添加了详细的调试日志

### 数据响应格式
后端返回格式：
```json
{
  "data": [...],
  "total": 100,
  "page": 1,
  "pageSize": 24
}
```

前端通过 axios 拦截器自动解包，store 中直接使用 `res.data` 访问数据。

## 📝 故障排查

### 如果页面显示"未选择相册"：
1. 打开浏览器开发者工具（F12）
2. 查看 Console 标签的日志输出
3. 查看 Network 标签检查 API 请求是否成功
4. 确认后端服务正在运行（curl http://localhost:8080/api/albums）

### 如果看不到图片列表：
1. **强制刷新页面**（Ctrl + Shift + R）
2. 检查 Console 日志中的"图片加载完成，数量"
3. 确认"图片总数"不为 0
4. 检查 Network 标签中 `/api/images` 请求的响应

### 如果端口被占用：
- 前端会自动尝试其他端口（5174, 5175...）
- 后端如果 8080 被占用，需要手动结束其他进程或修改 `backend/config/config.go` 中的端口

## 🎯 功能清单

✅ 相册管理（创建、编辑、删除）
✅ 图片上传（单张、批量、拖拽）
✅ 图片搜索
✅ 多格式链接复制（URL、Markdown、HTML、BBCode）
✅ 图片排序（时间、文件名、大小、访问次数）
✅ 分页加载
✅ 图片预览
✅ 批量操作
✅ 使用统计（访问次数、下载次数、流量统计）
✅ 访问次数展示（网格视图、列表视图）
✅ 统计数据可视化（趋势图表、热门排行）

## 🆕 最新更新（2025-12-04）

### 标签系统 🏷️
- ✅ 为图片添加标签
- ✅ 标签编辑器（添加、删除、选择常用标签）
- ✅ 网格视图显示标签（最多3个）
- ✅ 列表视图支持标签编辑
- ✅ 常用标签统计和快速添加
- ✅ 按标签搜索图片（API已实现）

### 统计功能
- ✅ 图片访问次数自动记录
- ✅ 图片下载次数统计
- ✅ 流量统计
- ✅ 统计页面（总览、今日、趋势、热门排行）
- ✅ 网格视图显示访问次数
- ✅ 列表视图显示访问次数
- ✅ 按访问次数排序

### 界面优化
- ✅ 修复复制链接按钮误触发预览的问题
- ✅ 网格视图每张图片显示访问次数（绿色图标）
- ✅ 列表视图增加"访问"列
- ✅ 排序选项增加"访问次数 ↓/↑"
- ✅ 新增标签编辑按钮（🏷️图标）
