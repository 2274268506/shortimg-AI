# 重构后功能测试清单

## ✅ 测试项目

### 1. 页面加载
- [ ] 页面能正常加载
- [ ] 相册列表正确显示
- [ ] 默认相册被选中
- [ ] 图片正确加载并显示

### 2. 相册管理
- [ ] 点击相册可切换
- [ ] 新建相册功能正常
- [ ] 编辑相册功能正常（名称和描述）
- [ ] 删除相册功能正常
- [ ] 默认相册不显示删除按钮
- [ ] 删除相册后自动跳转到第一个相册
- [ ] 相册图片数量统计正确

### 3. 图片上传
- [ ] 点击"上传图片"按钮打开对话框
- [ ] 可以选择目标相册
- [ ] 可以拖拽文件到上传区域
- [ ] 可以点击选择文件
- [ ] 支持批量选择
- [ ] 显示上传进度
- [ ] 上传成功后关闭对话框
- [ ] 上传后刷新图片列表
- [ ] 相册图片数量更新

### 4. 拖拽上传
- [ ] 拖拽文件到内容区域时显示提示层
- [ ] 释放文件后开始上传
- [ ] 显示上传进度
- [ ] 上传到当前选中的相册
- [ ] 上传成功后刷新列表
- [ ] 未选择相册时提示用户

### 5. 图片展示 - 网格视图
- [ ] 切换到网格视图正常显示
- [ ] 图片以卡片形式展示
- [ ] 鼠标悬停显示操作按钮
- [ ] 图片名称显示正确
- [ ] 文件大小显示正确
- [ ] 文件大小文本不超出卡片边界 ✨
- [ ] 响应式布局正常

### 6. 图片展示 - 列表视图
- [ ] 切换到列表视图正常显示
- [ ] 表格显示所有列
- [ ] 预览缩略图可点击
- [ ] 文件名、尺寸、大小、时间显示正确
- [ ] 操作按钮显示正确

### 7. 搜索功能
- [ ] 输入关键字能搜索图片
- [ ] 搜索结果正确
- [ ] 清空搜索框恢复所有图片
- [ ] 切换相册时清空搜索

### 8. 排序功能
- [ ] 按上传时间降序排序
- [ ] 按上传时间升序排序
- [ ] 按文件名 A-Z 排序
- [ ] 按文件名 Z-A 排序
- [ ] 按文件大小降序排序
- [ ] 按文件大小升序排序
- [ ] 排序后列表正确更新

### 9. 图片预览
- [ ] 点击图片打开预览对话框
- [ ] 显示大图
- [ ] 显示完整元数据
  - [ ] 文件名
  - [ ] 尺寸
  - [ ] 文件大小
  - [ ] 格式
  - [ ] 上传时间
  - [ ] 图片链接
- [ ] 可以从预览对话框复制链接
- [ ] 可以从预览对话框下载图片

### 10. 复制链接
- [ ] 复制直接链接功能正常
- [ ] 复制 Markdown 格式正常
- [ ] 复制 HTML 格式正常
- [ ] 复制 BBCode 格式正常
- [ ] 显示成功提示消息
- [ ] 网格视图中的复制功能
- [ ] 列表视图中的复制功能
- [ ] 预览对话框中的复制功能

### 11. 下载图片
- [ ] 网格视图下载功能正常
- [ ] 列表视图下载功能正常
- [ ] 预览对话框下载功能正常
- [ ] 下载的文件名正确

### 12. 删除图片
- [ ] 网格视图删除功能正常
- [ ] 列表视图删除功能正常
- [ ] 显示确认对话框
- [ ] 删除成功显示提示
- [ ] 删除后刷新列表
- [ ] 相册图片数量更新

### 13. 分页加载
- [ ] 初始加载显示第一页
- [ ] "加载更多"按钮显示正确
- [ ] 点击加载更多正常工作
- [ ] 全部加载后按钮变为"已全部加载"
- [ ] 按钮正确禁用

### 14. 统计面板
- [ ] 图片总数显示正确
- [ ] 总大小计算正确
- [ ] 当前相册名称显示正确
- [ ] 数据实时更新

### 15. 加载状态
- [ ] 加载时显示 Loading 图标
- [ ] 加载完成后隐藏 Loading
- [ ] 空状态显示正确提示

### 16. 响应式布局
- [ ] 不同屏幕尺寸下布局正常
- [ ] 网格自适应列数
- [ ] 移动端体验良好

### 17. 错误处理
- [ ] 上传失败显示错误提示
- [ ] 删除失败显示错误提示
- [ ] 网络错误有合适的提示
- [ ] 相册操作失败有错误提示

## 🐛 已知问题修复确认

### 文本溢出问题
- [x] 网格视图中文件大小文本不超出卡片
- [x] 使用 `width: 100%` 而非 `max-width`
- [x] 卡片最小宽度增加到 220px
- [x] padding 优化为 8px 10px

### 列表视图问题
- [x] 列表视图正确使用 `v-else-if`
- [x] 数据正确显示

### 排序和分页冲突
- [x] 排序在后端进行
- [x] 前端不再重复排序
- [x] 分页和排序协同工作

### 数据解析问题
- [x] Store 中使用 `res.data` 而非 `res.data.data`
- [x] Axios 拦截器已正确配置

## 📝 测试步骤

1. **启动后端**
   ```bash
   cd backend
   go run main.go
   ```

2. **启动前端**
   ```bash
   cd frontend
   npm run dev
   ```

3. **打开浏览器**
   访问 http://localhost:5173

4. **逐项测试**
   按照上述清单逐项测试每个功能

5. **记录结果**
   - ✅ 功能正常
   - ❌ 发现问题
   - ⚠️ 部分问题

## 🔍 重点测试区域

### 关键功能
1. ⭐ 拖拽上传（新重构的部分）
2. ⭐ 图片操作（复制、下载、删除）
3. ⭐ 视图切换（网格/列表）
4. ⭐ 排序和搜索

### 边界情况
1. 空相册
2. 大量图片（100+ 张）
3. 超大文件上传
4. 特殊字符文件名
5. 网络慢速情况

## 📊 测试报告模板

```markdown
## 测试日期: ____/____/____
## 测试人员: __________
## 浏览器版本: __________

### 通过的测试: ___/___
### 失败的测试: ___

### 问题列表:
1. 
2. 
3. 

### 改进建议:
1. 
2. 
3. 
```

## 🚀 回归测试

如遇到问题，可以恢复到原始版本：

```bash
# 回滚到原始 ImageManager.vue
mv frontend/src/views/ImageManager.vue frontend/src/views/ImageManager-refactored.vue
mv frontend/src/views/ImageManager.vue.backup frontend/src/views/ImageManager.vue

# 删除新组件（如果需要）
rm -rf frontend/src/components/Image*.vue
rm -rf frontend/src/components/Album*.vue
rm -rf frontend/src/components/Stats*.vue
rm -rf frontend/src/components/Upload*.vue
rm -rf frontend/src/composables/
```
